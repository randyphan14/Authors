{"ast":null,"code":"import _toConsumableArray from\"C:\\\\Users\\\\randy\\\\Documents\\\\Code\\\\CodingDojo\\\\Mern\\\\authors\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"C:\\\\Users\\\\randy\\\\Documents\\\\Code\\\\CodingDojo\\\\Mern\\\\authors\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import axios from'axios';import{Link}from'@reach/router';import AuthorForm from'../components/AuthorForm';export default(function(props){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),author=_useState2[0],setAuthor=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),loaded=_useState4[0],setLoaded=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),errors=_useState6[0],setErrors=_useState6[1];useEffect(function(){axios.get('http://localhost:8000/api/author').then(function(res){setAuthor(res.data);setLoaded(true);});},[]);var createAuthor=function createAuthor(person){axios.post('http://localhost:8000/api/author',person).then(function(res){setAuthor([].concat(_toConsumableArray(author),[res.data]));}).then(function(res){return console.log(res);})// If successful, do something with the response. \n.catch(function(err){var errorResponse=err.response.data.errors;// Get the errors from err.response.data\nvar errorArr=[];// Define a temp error array to push the messages in\nfor(var _i=0,_Object$keys=Object.keys(errorResponse);_i<_Object$keys.length;_i++){var key=_Object$keys[_i];// Loop through all errors and get the messages\nerrorArr.push(errorResponse[key].message);}// Set Errors\nsetErrors(errorArr);});};return React.createElement(\"div\",null,React.createElement(\"h1\",null,\"Favorite authors\"),React.createElement(Link,{to:\"/\"},\"Home\"),React.createElement(\"h3\",null,\"Add a new author:\"),errors.map(function(err,index){return React.createElement(\"p\",{key:index},err);}),React.createElement(AuthorForm,{onSubmitProp:createAuthor,initialName:\"\"}));});","map":{"version":3,"sources":["C:/Users/randy/Documents/Code/CodingDojo/Mern/authors/client/src/views/NewAuthor.js"],"names":["React","useEffect","useState","axios","Link","AuthorForm","props","author","setAuthor","loaded","setLoaded","errors","setErrors","get","then","res","data","createAuthor","person","post","console","log","catch","err","errorResponse","response","errorArr","Object","keys","key","push","message","map","index"],"mappings":"wYAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,KAA2C,OAA3C,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,IAAT,KAAqB,eAArB,CACA,MAAOC,CAAAA,UAAP,KAAuB,0BAAvB,CAEA,eAAe,SAAAC,KAAK,CAAI,eACQJ,QAAQ,CAAC,EAAD,CADhB,wCACbK,MADa,eACLC,SADK,8BAEQN,QAAQ,CAAC,KAAD,CAFhB,yCAEbO,MAFa,eAELC,SAFK,8BAGQR,QAAQ,CAAC,EAAD,CAHhB,yCAGbS,MAHa,eAGLC,SAHK,eAIpBX,SAAS,CAAC,UAAM,CACZE,KAAK,CAACU,GAAN,CAAU,kCAAV,EACKC,IADL,CACU,SAAAC,GAAG,CAAG,CACRP,SAAS,CAACO,GAAG,CAACC,IAAL,CAAT,CACAN,SAAS,CAAC,IAAD,CAAT,CACH,CAJL,EAKH,CANQ,CAMN,EANM,CAAT,CAQA,GAAMO,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,CAAAC,MAAM,CAAI,CAC3Bf,KAAK,CAACgB,IAAN,CAAW,kCAAX,CAA+CD,MAA/C,EACKJ,IADL,CACU,SAAAC,GAAG,CAAE,CACPP,SAAS,8BAAKD,MAAL,GAAaQ,GAAG,CAACC,IAAjB,GAAT,CACH,CAHL,EAIKF,IAJL,CAIU,SAAAC,GAAG,QAAEK,CAAAA,OAAO,CAACC,GAAR,CAAYN,GAAZ,CAAF,EAJb,CAIiC;AAJjC,CAKKO,KALL,CAKW,SAAAC,GAAG,CAAE,CACR,GAAMC,CAAAA,aAAa,CAAGD,GAAG,CAACE,QAAJ,CAAaT,IAAb,CAAkBL,MAAxC,CAAgD;AAChD,GAAMe,CAAAA,QAAQ,CAAG,EAAjB,CAAqB;AACrB,0BAAkBC,MAAM,CAACC,IAAP,CAAYJ,aAAZ,CAAlB,6BAA8C,CAAzC,GAAMK,CAAAA,GAAG,iBAAT,CAA2C;AAC5CH,QAAQ,CAACI,IAAT,CAAcN,aAAa,CAACK,GAAD,CAAb,CAAmBE,OAAjC,EACH,CACD;AACAnB,SAAS,CAACc,QAAD,CAAT,CACH,CAbL,EAcH,CAfD,CAiBA,MACI,gCACI,iDADJ,CAEI,oBAAC,IAAD,EAAM,EAAE,CAAE,GAAV,SAFJ,CAGI,kDAHJ,CAIKf,MAAM,CAACqB,GAAP,CAAW,SAACT,GAAD,CAAMU,KAAN,QAAgB,0BAAG,GAAG,CAAEA,KAAR,EAAgBV,GAAhB,CAAhB,EAAX,CAJL,CAKI,oBAAC,UAAD,EAAY,YAAY,CAAEN,YAA1B,CAAwC,WAAW,CAAC,EAApD,EALJ,CADJ,CASH,CAtCD","sourcesContent":["import React, { useEffect, useState } from 'react'\r\nimport axios from 'axios';\r\nimport { Link } from '@reach/router';\r\nimport AuthorForm from '../components/AuthorForm'\r\n\r\nexport default props => {\r\n    const [author, setAuthor] = useState([]);\r\n    const [loaded, setLoaded] = useState(false);\r\n    const [errors, setErrors] = useState([]); \r\n    useEffect(() => {\r\n        axios.get('http://localhost:8000/api/author')\r\n            .then(res =>{ \r\n                setAuthor(res.data)\r\n                setLoaded(true);\r\n            });\r\n    }, [])\r\n    \r\n    const createAuthor = person => {\r\n        axios.post('http://localhost:8000/api/author', person)\r\n            .then(res=>{\r\n                setAuthor([...author, res.data]);\r\n            })\r\n            .then(res=>console.log(res)) // If successful, do something with the response. \r\n            .catch(err=>{\r\n                const errorResponse = err.response.data.errors; // Get the errors from err.response.data\r\n                const errorArr = []; // Define a temp error array to push the messages in\r\n                for (const key of Object.keys(errorResponse)) { // Loop through all errors and get the messages\r\n                    errorArr.push(errorResponse[key].message)\r\n                }\r\n                // Set Errors\r\n                setErrors(errorArr);\r\n            })\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <h1>Favorite authors</h1>\r\n            <Link to={\"/\"}>Home</Link>\r\n            <h3>Add a new author:</h3>\r\n            {errors.map((err, index) => <p key={index}>{err}</p>)}\r\n            <AuthorForm onSubmitProp={createAuthor} initialName=\"\"/>\r\n        </div>\r\n    )\r\n}\r\n"]},"metadata":{},"sourceType":"module"}